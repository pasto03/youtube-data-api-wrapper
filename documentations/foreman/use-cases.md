> **Note**: This documentation was generated by AI and may contain inaccuracies. Please verify information and refer to the source code for authoritative details.

# Foreman Use Cases

This document provides practical examples of when and how to use each foreman component.

## Quick Reference

| Foreman                | Use Case                      | Input                    | Output                              |
| ---------------------- | ----------------------------- | ------------------------ | ----------------------------------- |
| ChannelsForeman        | Get structured channel data   | List of channel IDs      | Channel objects/dictionaries        |
| VideosForeman          | Get structured video data     | List of video IDs        | Video objects/dictionaries          |
| PlaylistsForeman       | Get structured playlist data  | List of channel IDs      | Playlist objects/dictionaries       |
| PlaylistItemsForeman   | Get structured playlist items | List of playlist IDs     | Playlist item objects/dictionaries  |
| SearchForeman          | Search and structure results  | List of SearchParamProps | Search result objects/dictionaries  |
| CommentThreadsForeman  | Get structured comments       | List of video IDs        | Comment thread objects/dictionaries |
| CaptionsForeman        | Get structured captions       | List of CaptionsParams   | Caption objects/dictionaries        |
| VideoCategoriesForeman | Get structured categories     | List of region codes     | Category objects/dictionaries       |

## Common Patterns

### Pattern 1: Structured Data Access

Get structured, type-safe data:

```python
from yt_pipeline.foreman import ChannelsForeman
from yt_pipeline.retriever import RetrieverSettings

foreman = ChannelsForeman()
container = foreman.invoke(
    iterable=["UC_x5XG1OV2P6uZZ5FSM9Ttw"],
    developerKey=devKey,
    as_box=True  # Return container
)

# Type-safe access
for channel in container.items:
    print(channel.id)
    print(channel.snippet.title)
    print(channel.statistics.viewCount)
```

### Pattern 2: Flattened Data Export

Get flattened dictionaries for export:

```python
foreman = ChannelsForeman()
shipper = foreman.invoke(
    iterable=["UC_x5XG1OV2P6uZZ5FSM9Ttw"],
    developerKey=devKey,
    as_box=False  # Return shipper (default)
)

# Export-ready data
import json
with open("channels.json", "w") as f:
    json.dump(shipper.main_records, f, indent=2)
```

### Pattern 3: In Pipelines

Use foremen in pipelines:

```python
from yt_pipeline.pipeline import Pipeline, PipelineBlock, PipelineStacks
from yt_pipeline.foreman import ChannelsForeman, PlaylistsForeman

stacks = PipelineStacks(
    initial_input=["UC_x5XG1OV2P6uZZ5FSM9Ttw"],
    blocks=[
        PipelineBlock(foreman=ChannelsForeman()),
        PipelineBlock(foreman=PlaylistsForeman())
    ]
)

pipeline = Pipeline(stacks=stacks, developerKey=devKey)
result = pipeline.invoke()
```

## Detailed Examples

### Example 1: Channel Analysis

```python
from yt_pipeline.foreman import ChannelsForeman
from yt_pipeline.retriever import RetrieverSettings

foreman = ChannelsForeman()
container = foreman.invoke(
    iterable=["UC_x5XG1OV2P6uZZ5FSM9Ttw"],
    developerKey=devKey,
    retriever_settings=RetrieverSettings(multithread=True),
    as_box=True
)

# Analyze channels
for channel in container.items:
    print(f"Channel: {channel.snippet.title}")
    print(f"Subscribers: {channel.statistics.subscriberCount}")
    print(f"Views: {channel.statistics.viewCount}")
    print(f"Videos: {channel.statistics.videoCount}")

    # Access thumbnails
    for thumb in channel.snippet.thumbnails:
        print(f"  {thumb.quality}: {thumb.url}")
```

### Example 2: Video Search and Details

```python
from yt_pipeline.foreman import SearchForeman, VideosForeman
from yt_pipeline.retriever import RetrieverSettings, PipeSettings, SearchParamProps, SearchTypeCheckboxProps

# Search for videos
search_foreman = SearchForeman(types=SearchTypeCheckboxProps(video=True))
search_container = search_foreman.invoke(
    iterable=[SearchParamProps(q="python tutorial")],
    developerKey=devKey,
    pipe_settings=PipeSettings(max_page=1),
    as_box=True
)

# Extract video IDs
video_ids = [item.id.videoId for item in search_container.items if item.id.kind == "youtube#video"]

# Get video details
videos_foreman = VideosForeman()
videos_shipper = videos_foreman.invoke(
    iterable=video_ids,
    developerKey=devKey,
    retriever_settings=RetrieverSettings(multithread=True)
)

# Access flattened data
for video in videos_shipper.main_records:
    print(f"Title: {video['title']}")
    print(f"Views: {video['viewCount']}")
    print(f"Duration: {video.get('duration', 'N/A')}")
```

### Example 3: Playlist Analysis

```python
from yt_pipeline.foreman import PlaylistsForeman, PlaylistItemsForeman
from yt_pipeline.retriever import RetrieverSettings, PipeSettings

# Get playlists
playlists_foreman = PlaylistsForeman()
playlists_container = playlists_foreman.invoke(
    iterable=["UC_x5XG1OV2P6uZZ5FSM9Ttw"],
    developerKey=devKey,
    pipe_settings=PipeSettings(max_page=10),
    as_box=True
)

# Analyze each playlist
for playlist in playlists_container.items:
    print(f"Playlist: {playlist.snippet.title}")
    print(f"Items: {playlist.contentDetails.itemCount}")

    # Get playlist items
    items_foreman = PlaylistItemsForeman()
    items_shipper = items_foreman.invoke(
        iterable=[playlist.id],
        developerKey=devKey,
        pipe_settings=PipeSettings(max_page=1)
    )

    print(f"  First {len(items_shipper.main_records)} items retrieved")
```

## Best Practices

1. **Use Containers for Programmatic Access** — Use `as_box=True` when you need structured, type-safe data
2. **Use Shippers for Export** — Use `as_box=False` (default) when exporting to JSON/CSV
3. **Enable Multithreading** — Use `multithread=True` for batch operations
4. **Use in Pipelines** — Foremen are required for pipelines; they handle ID extraction automatically
5. **Handle Errors** — Check `foreman.errors` for any errors that occurred

## When to Use Foremen vs Retrievers

### Use Foremen When:

- You want structured, type-safe data access
- You need a simpler, higher-level interface
- You're building pipelines
- You want automatic data parsing and organization
- You need both structured objects and flattened dictionaries

### Use Retrievers When:

- You need raw API responses
- You're building custom processing logic
- You need fine-grained control over API calls
- You're integrating with other systems that expect raw API format

## Next Steps

- Explore specific foremen: [Channels](./channels.md), [Videos](./videos.md), [Search](./search.md)
- Learn about [Pipelines](../pipeline/pipeline.md) for automated workflows
- Read about [Containers](../container/container.md) and [Shippers](../shipper/shipper.md) for data formats
