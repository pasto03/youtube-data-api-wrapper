> **Note**: This documentation was generated by AI and may contain inaccuracies. Please verify information and refer to the source code for authoritative details.

# Container Component

## Overview

The **Container** component parses raw YouTube Data API v3 responses into structured, type-safe dataclass objects. It provides a clean, object-oriented interface to API data with proper type hints and attribute access.

## Purpose

Containers transform raw API responses (dictionaries) into structured objects that:

- Provide type-safe access to data
- Preserve relationships and nested structures
- Enable IDE autocomplete and type checking
- Make data access more intuitive and less error-prone

## Key Features

1. **Structured Parsing** — Converts raw API dictionaries into dataclass objects
2. **Type Safety** — Full type hints for all attributes
3. **Nested Structures** — Preserves relationships (e.g., video → snippet → thumbnails)
4. **Thumbnail Extraction** — Automatically extracts and structures thumbnail data
5. **Consistent Interface** — All containers follow the same pattern

## Architecture

Containers sit between Retrievers and Shippers in the data flow:

```
Raw API Response (list[dict]) → Container → Structured Objects (list[Item])
```

### Container Structure

Each container:

1. Takes raw API responses (`list[dict]`)
2. Parses each dictionary into a structured `Item` object
3. Returns a list of `Item` objects via `container.items`

### Item Structure

Each item is a dataclass with:

- **Core Fields**: `kind`, `etag`, `id`
- **Snippet**: Content details (title, description, published date, etc.)
- **Statistics**: Metrics (view count, subscriber count, etc.)
- **Thumbnails**: List of `ItemThumbnail` objects with quality, URL, dimensions

## Response Structure

### General Structure

All container items follow this pattern:

```python
@dataclass
class Item:
    kind: str              # Resource type (e.g., "youtube#channel")
    etag: str              # Entity tag
    id: str                # Resource ID
    snippet: Snippet       # Content details
    statistics: Statistics # Metrics (if available)
    # ... other fields specific to resource type
```

### Snippet Structure

```python
@dataclass
class Snippet:
    title: str
    description: str
    publishedAt: str
    thumbnails: list[ItemThumbnail]
    # ... other fields
```

### Thumbnail Structure

```python
@dataclass
class ItemThumbnail:
    quality: str      # "default", "medium", "high", etc.
    url: str          # Thumbnail URL
    width: str | None
    height: str | None
```

## Available Containers

- **[ChannelsContainer](./channels.md)** — Channel data structure
- **[VideosContainer](./videos.md)** — Video data structure
- **[PlaylistsContainer](./playlists.md)** — Playlist data structure
- **[PlaylistItemsContainer](./playlist_items.md)** — Playlist item data structure
- **[SearchContainer](./search.md)** — Search result data structure
- **[CommentThreadsContainer](./comment_threads.md)** — Comment thread data structure
- **[CaptionsContainer](./captions.md)** — Caption data structure
- **[VideoCategoriesContainer](./video_categories.md)** — Video category data structure

## When to Use Containers

### Use Containers When:

- You want type-safe, structured data access
- You need to preserve relationships and nested structures
- You're working with data programmatically and want IDE support
- You need to access specific nested attributes

### Use Shippers When:

- You need flattened dictionaries for export
- You're converting data to JSON/CSV
- You want a simpler, flat data structure

## Usage

Containers are typically used internally by Foremen, but can be accessed directly:

```python
from yt_pipeline.container import ChannelsContainer

# Raw API response (from retriever)
raw_response = [
    {
        "kind": "youtube#channel",
        "id": "UC_x5XG1OV2P6uZZ5FSM9Ttw",
        "snippet": {...},
        "statistics": {...}
    }
]

# Parse into container
container = ChannelsContainer(raw_items=raw_response)

# Access structured data
for channel in container.items:
    print(channel.id)                    # "UC_x5XG1OV2P6uZZ5FSM9Ttw"
    print(channel.snippet.title)         # Channel title
    print(channel.statistics.viewCount)  # View count

    # Access thumbnails
    for thumb in channel.snippet.thumbnails:
        print(f"{thumb.quality}: {thumb.url}")
```

### Through Foremen

```python
from yt_pipeline.foreman import ChannelsForeman

foreman = ChannelsForeman()
container = foreman.invoke(
    iterable=["UC_x5XG1OV2P6uZZ5FSM9Ttw"],
    developerKey=devKey,
    as_box=True  # Return container instead of shipper
)

# Access items
for channel in container.items:
    print(channel.snippet.title)
```

## Data Access Patterns

### Accessing Core Fields

```python
item.id      # Resource ID
item.kind    # Resource type
item.etag    # Entity tag
```

### Accessing Snippet Data

```python
item.snippet.title
item.snippet.description
item.snippet.publishedAt
item.snippet.thumbnails  # List of ItemThumbnail objects
```

### Accessing Statistics

```python
item.statistics.viewCount
item.statistics.subscriberCount
item.statistics.videoCount
```

### Accessing Thumbnails

```python
for thumbnail in item.snippet.thumbnails:
    print(thumbnail.quality)  # "default", "medium", "high", etc.
    print(thumbnail.url)
    print(thumbnail.width)
    print(thumbnail.height)
```

## Related Components

- **[Retriever](../retriever/retriever.md)** — Provides raw API responses
- **[Shipper](../shipper/shipper.md)** — Flattens container objects into dictionaries
- **[Foreman](../foreman/foreman.md)** — Uses containers internally and provides access to them

## Next Steps

- Read about [Response Structure](./response-structure.md) for detailed structure information
- Explore specific containers: [Channels](./channels.md), [Videos](./videos.md), [Search](./search.md)
- Learn about [Shippers](../shipper/shipper.md) for flattened data export
