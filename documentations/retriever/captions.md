> **Note**: This documentation was generated by AI and may contain inaccuracies. Please verify information and refer to the source code for authoritative details.

# CaptionsRetriever

## Purpose

The `CaptionsRetriever` retrieves caption tracks (subtitles) for YouTube videos. It uses the `SingleRetriever` pattern as it retrieves a single resource per video.

## Input Requirements

- **Input Type**: `CaptionsParams` — Caption parameters object
- **Required Fields**:
  - `videoId` (str): Video ID
  - `part` (str): Parts to retrieve (typically "snippet")
- **Optional Fields**:
  - `id` (str): Specific caption track ID (if retrieving specific track)

## Output Structure

Returns a list of dictionaries, each containing:

- **Core Fields**: `kind`, `etag`, `id`
- **Snippet**: Caption track information including language, name, track kind

### Key Fields

- `id` — Caption track ID
- `snippet.videoId` — Video ID
- `snippet.language` — Language code (e.g., "en", "es")
- `snippet.name` — Caption track name
- `snippet.trackKind` — Track type ("standard" or "ASR" for auto-generated)

## Common Use Cases

1. **Caption Availability** — Check if videos have captions
2. **Language Detection** — Find available caption languages
3. **Accessibility** — Identify videos with captions for accessibility
4. **Content Analysis** — Prepare for caption text extraction

## Example Usage

### Basic Usage

```python
from yt_pipeline.retriever import CaptionsRetriever, CaptionsParams

params = CaptionsParams(videoId="dQw4w9WgXcQ", part="snippet")
retriever = CaptionsRetriever(params=params, developerKey=devKey)

results = retriever.invoke()

for caption in results:
    print(f"Language: {caption['snippet']['language']}")
    print(f"Name: {caption['snippet']['name']}")
    print(f"Kind: {caption['snippet']['trackKind']}")
```

## Special Considerations

1. **Single Resource** — Returns caption track metadata, not caption text
2. **Caption Text** — To get actual caption text, use YouTube's caption download API separately
3. **Auto-Generated** — Tracks with `trackKind="ASR"` are auto-generated
4. **Availability** — Not all videos have captions
5. **Quota Cost** — 50 units per API call

## Related Components

- **[CaptionsForeman](../foreman/captions.md)** — Structured caption data access
- **[CaptionsContainer](../container/captions.md)** — Parsed caption objects
- **[CaptionsShipper](../shipper/captions.md)** — Flattened caption data

## Next Steps

- Read about [Retriever Use Cases](./use-cases.md) for more examples
- Learn about [CaptionsForeman](../foreman/captions.md) for structured access
- Explore [Pipelines](../pipeline/pipeline.md) for automated workflows
